<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>User-Agent Generator — Variants Multi-Device</title>
  <style>
    :root{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;}
    body{display:flex;align-items:center;justify-content:center;min-height:100vh;background:#f6f8fa;padding:20px}
    .card{width:100%;max-width:920px;background:white;padding:20px;border-radius:12px;box-shadow:0 6px 22px rgba(12,20,40,0.08)}
    h1{margin:0 0 6px;font-size:20px}
    p.sub{margin:0 0 14px;color:#556}
    .controls{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
    button{padding:10px 14px;border-radius:8px;border:1px solid #e3e7ee;background:#fff;cursor:pointer}
    button.primary{background:#111827;color:#fff;border:0}
    .ua-box{background:#0b1220;color:#e6f0ff;padding:12px;border-radius:8px;font-family:monospace;white-space:pre-wrap}
    .meta{display:flex;justify-content:space-between;align-items:center;margin-top:8px}
    .small{font-size:13px;color:#6b7280}
    .badge{background:#eef2ff;color:#3730a3;padding:6px 8px;border-radius:999px;font-weight:600}
    .actions{display:flex;gap:8px}
    label.switch{display:inline-flex;align-items:center;gap:8px}
    textarea{width:100%;height:120px;margin-top:12px;padding:10px;border-radius:8px;border:1px solid #e6edf3;font-family:monospace}
    footer{margin-top:16px;font-size:13px;color:#6b7280}
  </style>
</head>
<body>
  <div class="card">
    <h1>User-Agent Generator — Multi-Device Variants (Non-Repeating)</h1>
    <p class="sub">Sekarang generator akan membuat UA **bervariasi antar-device** (Samsung, Pixel, Xiaomi, OnePlus, Oppo, Realme, Moto, Infinix, Redmi, Vivo dll) — semua tetap punya **Android 15** dan pola WebKit/Chrome yang sesuai. Hasilnya unik tiap generate dan **tidak mengulang** selama sesi (disimpan di <code>sessionStorage</code>).</p>

    <div class="controls">
      <button id="generate" class="primary">Generate UA</button>
      <button id="copy">Copy</button>
      <button id="export">Export remaining (.txt)</button>
      <button id="reset">Reset List</button>
      <div style="flex:1"></div>
      <label class="switch"><input type="checkbox" id="autoReset"><span class="small">Auto-reset when empty</span></label>
    </div>

    <div class="ua-box" id="uaBox">Tekan "Generate UA" untuk mulai.</div>

    <div class="meta">
      <div class="small">Sisa UA unik: <span id="remaining">—</span></div>
      <div class="actions"><div class="badge" id="status">Ready</div></div>
    </div>

    <textarea id="log" placeholder="Log (optional): menampilkan UA yang sudah di-generate..." readonly></textarea>

    <footer>
      Notes: Pool UA dibuat dinamis dari kombinasi device models + build strings + variasi Chrome minor version. Semua UA masih mempertahankan struktur seperti sumber asli yang lo kasih.
    </footer>
  </div>

<script>
(() => {
  // Base pattern user gave — kita pertahankan strukturnya
  // Contoh sumber: Mozilla/5.0 (Linux; Android 15; V2318 Build/AP3A.240905.015.A2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.7499.15 Mobile Safari/537.36

  const KEY = 'ua_gen_multi_remaining_v2';

  // Daftar device yang beragam (jangan fokus cuma 1 brand)
  const DEVICE_CODES = [
    'SM-G998B', 'V2318', 'Pixel 8 Pro', 'Redmi Note 13 Pro+', 'X6850', 'OnePlus 12', 'OPR-1', 'Xiaomi 14', 'Realme GT5', 'moto edge 50', 'Poco X6', 'OPPO Find X7', 'Vivo V29', 'Samsung SM-S918B', 'SM-A536E', 'SM-F936B', 'Nokia X30', 'Sharp Aquos R8', 'HONOR 90', 'Asus ROG Phone 8'
  ];

  // Build token generator (randomize short segments but keep plausibility)
  function randomBuild(){
    // pattern like AP3A.240905.015.A2 -> keep AP3A + date-like + patch + suffix
    const prefix = ['AP3A','AP4B','BP2C','CP1D'];
    const date = () => {
      // generate plausible date YYMMDD between 240101 and 240930
      const yy = '24';
      const mm = String(Math.floor(Math.random()*9)+1).padStart(2,'0');
      const dd = String(Math.floor(Math.random()*28)+1).padStart(2,'0');
      return yy+mm+dd;
    }
    const patch = String(Math.floor(Math.random()*200)+1).padStart(3,'0');
    const suffix = String.fromCharCode(65 + Math.floor(Math.random()*26)) + (Math.floor(Math.random()*5)+1);
    return `${prefix[Math.floor(Math.random()*prefix.length)]}.${date()}.${patch}.${suffix}`;
  }

  function chromeVersion(){
    // Chrome/143.0.xxxx.yy — vary xxxx and yy
    const build = String(Math.floor(Math.random()*9000)+7000); // 7000-15999
    const patch = String(Math.floor(Math.random()*90)+10); // 10-99
    return `143.0.${build}.${patch}`;
  }

  function makeUA(device){
    const build = randomBuild();
    const chrome = chromeVersion();
    // ensure device token doesn't contain parentheses
    const safeDevice = device.replace(/[()]/g,'').trim();
    return `Mozilla/5.0 (Linux; Android 15; ${safeDevice} Build/${build}) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/${chrome} Mobile Safari/537.36`;
  }

  // Build a pool by combining devices and generating multiple variants each
  function buildPool(){
    const pool = [];
    DEVICE_CODES.forEach(d => {
      const variants = Math.floor(Math.random()*8) + 6; // 6-13 variants per device
      for(let i=0;i<variants;i++){
        pool.push(makeUA(d));
      }
    });
    // dedupe just in case
    return Array.from(new Set(pool));
  }

  // session storage helpers
  const el = id => document.getElementById(id);
  function saveRemaining(arr){
    sessionStorage.setItem(KEY, JSON.stringify(arr));
  }
  function loadRemaining(){
    try{
      const raw = sessionStorage.getItem(KEY);
      if(!raw) return buildPool();
      const parsed = JSON.parse(raw);
      if(!Array.isArray(parsed) || parsed.length === 0) return buildPool();
      return parsed;
    }catch(e){
      return buildPool();
    }
  }

  let remaining = loadRemaining();
  let generated = [];

  function updateUI(msg){
    el('remaining').textContent = remaining.length;
    el('status').textContent = msg || 'Ready';
  }

  function pickRandom(){
    if(remaining.length === 0) return null;
    const i = Math.floor(Math.random() * remaining.length);
    const ua = remaining.splice(i,1)[0];
    generated.unshift(ua);
    if(generated.length > 200) generated.pop();
    saveRemaining(remaining);
    updateLog();
    return ua;
  }

  function updateLog(){
    el('log').value = generated.slice(0,50).join('
');
  }

  el('generate').addEventListener('click', ()=>{
    if(remaining.length === 0){
      if(el('autoReset').checked){
        remaining = buildPool();
        saveRemaining(remaining);
        el('status').textContent = 'Auto-reset';
      } else {
        el('uaBox').textContent = 'Semua UA sudah dipakai. Tekan Reset untuk mengisi ulang.';
        updateUI('Empty');
        return;
      }
    }
    const ua = pickRandom();
    if(ua){
      el('uaBox').textContent = ua;
      el('status').textContent = 'Generated';
    } else {
      el('uaBox').textContent = 'Gagal generate.';
    }
    updateUI();
  });

  el('copy').addEventListener('click', async ()=>{
    const txt = el('uaBox').textContent || '';
    if(!txt || txt.includes('Tekan')) return;
    try{
      await navigator.clipboard.writeText(txt);
      el('status').textContent = 'Copied ✔';
      setTimeout(()=>updateUI('Ready'),900);
    }catch(err){
      el('status').textContent = 'Copy failed';
    }
  });

  el('reset').addEventListener('click', ()=>{
    if(confirm('Reset semua UA jadi belum dipakai lagi?')){
      remaining = buildPool();
      saveRemaining(remaining);
      generated = [];
      el('uaBox').textContent = 'List telah di-reset. Tekan Generate untuk mulai lagi.';
      updateLog();
      updateUI('Reset');
    }
  });

  el('export').addEventListener('click', ()=>{
    if(remaining.length === 0){
      alert('Tidak ada UA tersisa untuk diekspor. Reset terlebih dahulu.');
      return;
    }
    const blob = new Blob([remaining.join('
')], {type: 'text/plain'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'remaining_user_agents.txt';
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);
    el('status').textContent = 'Exported';
    setTimeout(()=>updateUI('Ready'),900);
  });

  // init ui
  updateUI();
  if(remaining.length > 0){
    el('uaBox').textContent = 'Pool UA siap. Tekan Generate untuk mengambil UA unik.';
  }
  updateLog();
})();
</script>
</body>
</html>
